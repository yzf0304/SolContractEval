```solidity
pragma solidity ^0.8.4;

/**
 *Submitted for verification at Etherscan.io on 2021-05-06
*/

interface IERC20{

  function balanceOf(address account) external view returns (uint256);

  function transfer(address recipient, uint256 amount) external returns (bool);

  function allowance(address _owner, address spender) external view returns (uint256);
  
  function approve(address spender, uint256 amount) external returns (bool);
  
  function increaseAllowance(address spender, uint256 addedValue) external;

  function decreaseAllowance(address spender, uint256 subtractedValue) external;

  function transferFrom(address sender, address recipient, uint256 amount) external returns (bool);

}

interface contract2{
    
    function claimRewards(address user) external returns(bool);
}

interface MCHstakingInterface {
    
    function stakingStats(address user) external view returns(uint256 amount, uint256 stakingBlock) ;
    
    function totalStaked() external view returns(uint256);
    
    function showBlackUser(address user) external view returns(bool) ;
    
    function allowance(address user) external view returns(bool) ;
    
    function transferOwnership(address to) external ;
    
    function giveAllowence(address user) external ;
    
    function removeAllowence(address user) external ;
    
    function addToBlackList(address user) external ;

    function removeFromBlackList(address user) external ;
    
    function stakeMCH(uint256 amount) external ;
    
    function unstake(address user, uint256 amount) external ;
    
    function refreshBlock(address user) external ;    
    
    function setData(address user, uint256 staked, uint256 stakingBlock, uint256 stakedMCH) external ;    
    
    function transferMCH(address to, uint256 amount) external ;
    
    function emergencyWithdraw(uint256 amount) external ;    
    
    event Stake(address indexed staker, uint256 indexed amount);
}



// You task is to complete the smart contract MCHstaking strictly according to the provided context and description. Note that the contract is deployed using compiler version 0.8.4, and do not introduce any additional contracts, dependencies, or unrelated code. Deliver only the complete and functional target contract without any extraneous implementations or examples.

/**
 * @title MCHstaking
 * @notice This contract allows users to stake MCH tokens and provides functionalities for managing staking, blacklisting, and allowances.
 * @dev The contract is designed to interact with an MCH token (ERC20) and a secondary contract (MCF). It also includes owner-only functions for management.
 */
contract MCHstaking is MCHstakingInterface {
    
    address private _owner;
    mapping (address => bool) private _allowence;
    IERC20 MCH;
    contract2 MCF;
    
    mapping (address => uint256) private _staking;
    mapping (address => uint256) private _block;
    
    uint256 _totalStaked;
    
    mapping (address => bool) private _blackListed;
    
    constructor(address MCHtoken) {
        MCH = IERC20(MCHtoken);
        _owner = msg.sender;
        _allowence[msg.sender] = true;
    }
    
    /**
     * @notice Sets the MCF contract address.
     * @dev Only the contract owner can call this function.
     * @param contractAddress The address of the MCF contract.
     */
    function setMCFcontract(address contractAddress) external {
        require(msg.sender == _owner, "Only owner can set MCF contract address");
        MCF = contract2(contractAddress);
    }
    
    /**
     * @notice Returns the staking statistics of a user.
     * @dev This function returns the amount staked and the block number at which the user last staked.
     * @param user The address of the user.
     * @return amount The amount of MCH staked by the user.
     * @return stakingBlock The block number at which the user last staked.
     */
    function stakingStats(address user) external view override returns(uint256 amount, uint256 stakingBlock){
        amount = _staking[user];
        stakingBlock = _block[user];
    }
    
    /**
     * @notice Returns the total amount of MCH staked in the contract.
     * @dev This function is used to get the total staked amount.
     * @return The total amount of MCH staked.
     */
    function totalStaked() external view override returns(uint256){
        return _totalStaked;
    }
    
    /**
     * @notice Checks if a user is blacklisted.
     * @dev Only addresses with allowance can call this function.
     * @param user The address of the user.
     * @return A boolean indicating whether the user is blacklisted.
     */
    function showBlackUser(address user) external view override returns(bool){
        require(_allowence[msg.sender], "Not allowed");
        return _blackListed[user];
    }
    
    /**
     * @notice Checks if a user has allowance.
     * @dev Only addresses with allowance can call this function.
     * @param user The address of the user.
     * @return A boolean indicating whether the user has allowance.
     */
    function allowance(address user) external view override returns(bool){
        require(_allowence[msg.sender], "Not allowed");
        return _allowence[user];
    }
    
    //======================================================================================================================================================
    
    /**
     * @notice Transfers ownership of the contract to a new address.
     * @dev Only the current owner can call this function.
     * @param to The address of the new owner.
     */
    function transferOwnership(address to) external override {
        require(msg.sender == _owner, "Only owner can transfer ownership");
        _owner = to;
        _allowence[to] = true;
    }
    
    /**
     * @notice Grants allowance to a user.
     * @dev Only the contract owner can call this function.
     * @param user The address of the user to grant allowance to.
     */
    function giveAllowence(address user) external override {
        require(msg.sender == _owner, "Only owner can give allowance");
        _allowence[user] = true;
    }
    
    /**
     * @notice Revokes allowance from a user.
     * @dev Only the contract owner can call this function.
     * @param user The address of the user to revoke allowance from.
     */
    function removeAllowence(address user) external override {
        require(msg.sender == _owner, "Only owner can remove allowance");
        delete _allowence[user];
    }  
    
    /**
     * @notice Adds a user to the blacklist.
     * @dev Only the contract owner can call this function.
     * @param user The address of the user to add to the blacklist.
     */
    function addToBlackList(address user) external override {
        require(msg.sender == _owner, "Only owner can add to blacklist");
        _blackListed[user] = true;
    }

    /**
     * @notice Removes a user from the blacklist.
     * @dev Only the contract owner can call this function.
     * @param user The address of the user to remove from the blacklist.
     */
    function removeFromBlackList(address user) external override {
        require(msg.sender == _owner, "Only owner can remove from blacklist");
        delete _blackListed[user];
    }    
    
    /**
     * @notice Allows a user to stake MCH tokens.
     * @dev This function transfers MCH tokens from the user to the contract and updates the staking data.
     * @param amount The amount of MCH to stake.
     */
    function stakeMCH(uint256 amount) external override {
        require(!_blackListed[msg.sender], "User is blacklisted");
        MCH.transferFrom(msg.sender, address(this), amount);
        _staking[msg.sender] += amount;
        _block[msg.sender] = block.number;
        _totalStaked += amount;
        emit Stake(msg.sender, amount);
    }
    
    /**
     * @notice Allows a user to unstake MCH tokens.
     * @dev Only addresses with allowance can call this function.
     * @param user The address of the user to unstake.
     * @param amount The amount of MCH to unstake.
     */
    function unstake(address user, uint256 amount) external override {
        require(_allowence[msg.sender], "Not allowed");
        require(_staking[user] >= amount, "Not enough staked");
        _staking[user] -= amount;
        _totalStaked -= amount;
        MCH.transfer(user, amount);
    }
    
    /**
     * @notice Refreshes the block number for a user's staking.
     * @dev Only addresses with allowance can call this function.
     * @param user The address of the user.
     */
    function refreshBlock(address user) external override {
        require(_allowence[msg.sender], "Not allowed");
        _block[user] = block.number;
    }
    
    /**
     * @notice Sets the staking data for a user.
     * @dev Only addresses with allowance can call this function.
     * @param user The address of the user.
     * @param staked The amount of MCH staked by the user.
     * @param stakingBlock The block number at which the user last staked.
     * @param stakedMCH The total amount of MCH staked in the contract.
     */
    function setData(address user, uint256 staked, uint256 stakingBlock, uint256 stakedMCH) external override {
        require(_allowence[msg.sender], "Not allowed");
        _staking[user] = staked;
        _block[user] = stakingBlock;
        _totalStaked = stakedMCH;
    }
    
    /**
     * @notice Transfers MCH tokens to another address.
     * @dev Only addresses with allowance can call this function. The transfer amount must not exceed the available balance.
     * @param to The address to transfer the MCH tokens to.
     * @param amount The amount of MCH to transfer.
     */
    function transferMCH(address to, uint256 amount) external override {
        require(_allowence[msg.sender], "Not allowed");
        require(MCH.balanceOf(address(this)) >= amount, "Not enough balance");
        MCH.transfer(to, amount);
    }
    
    /**
     * @notice Allows the owner to withdraw MCH tokens in case of an emergency.
     * @dev Only the contract owner can call this function.
     * @param amount The amount of MCH to withdraw.
     */
    function emergencyWithdraw(uint256 amount) external override {
        require(msg.sender == _owner, "Only owner can withdraw");
        require(MCH.balanceOf(address(this)) >= amount, "Not enough balance");
        MCH.transfer(_owner, amount);
    }
}
```